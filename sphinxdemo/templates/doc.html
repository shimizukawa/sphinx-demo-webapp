{% extends "base.html" %}

{%- block title %}
  {{ document.title }}
{%- endblock %}

{% block css %}
  {{ super() }}
  <link rel="stylesheet" href="/static/websupport.css" type="text/css" media="screen" />
{% endblock %}

{%- block js %}
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:    '',
      VERSION:     '0.6.7',
      COLLAPSE_MODINDEX: false,
      FILE_SUFFIX: '',
      HAS_SOURCE:  true
    };

    var COMMENT_OPTIONS = {
      addCommentURL: '/docs/add_comment',
      getCommentsURL: '/docs/get_comments',
      processVoteURL: '/docs/process_vote',
      {%- if g.user %}
      voting: true,
      {%- endif %}
    };
  </script>
  {{ super() }}
  <script type="text/javascript" src="/static/websupport.js"></script>

  <script type="text/html" id="popup_template">
    <div class="popup_comment">
      <a id="comment_close" href="#">x</a>
      <h1>Comments</h1>
      <form method="post" id="comment_form" action="/docs/add_comment">
	<textarea name="comment" cols="80"></textarea>
	<p class="propose_button">
	  <a href="#" class="show_propose_change">
	    Propose a change &#9657;
	  </a>
	  <a href="#" class="hide_propose_change">
	    Propose a change &#9663;
	  </a>
	</p>
	<textarea name="proposal" cols="80" spellcheck="false"></textarea>
	<input type="submit" value="add comment" id="comment_button" />
	<input type="hidden" name="parent" />
      <p class="sort_options">
	Sort by: 
	<a href="#" class="sort_option" id="rating">top</a>
	<a href="#" class="sort_option" id="ascage">newest</a>
	<a href="#" class="sort_option" id="age">oldest</a>
      </p>
      </form>
      <h3 id="comment_notification">loading comments... <img src="/static/ajax-loader.gif" alt="" /></h3>
      <ul id="comment_ul"></ul>
    </div>
    <div id="focuser"></div>
  </script>

  <script type="text/html" id="comment_template">
    <div  id="cd<%id%>" class="spxcdiv">
      <div class="vote">
	<div class="arrow">
	  <a href="#" id="uv<%id%>" class="vote">
	    <img src="<%upArrow%>" />
	  </a>
	  <a href="#" id="uu<%id%>" class="un vote">
	    <img src="<%upArrowPressed%>" />
	  </a>
	</div>
	<div class="arrow">
	  <a href="#" id="dv<%id%>" class="vote">
	    <img src="<%downArrow%>" id="da<%id%>" />
	  </a>
	  <a href="#" id="du<%id%>" class="un vote">
	    <img src="<%downArrowPressed%>" />
	  </a>
	</div>
      </div>
      <div class="comment_content">
	<p class="tagline comment">
	  <span class="user_id"><%username%></span>
	  <span class="rating"><%pretty_rating%></span>
	  <span class="delta"><%time.delta%></span>
	</p>
	<p class="comment_text comment"><%text%></p>
	<p class="comment_opts comment">
	  <a href="#" class="reply" id="rl<%id%>">reply &#9657;</a>
	  <a href="#" class="close_reply" id="cr<%id%>">reply &#9663;</a>
	  <a href="#" id="sp<%id%>" class="show_proposal">
	    proposal &#9657;
	  </a>
	  <a href="#" id="hp<%id%>" class="hide_proposal">
	    proposal &#9663;
	  </a>
	</p>
	<pre class="proposal" id="pr<%id%>">
<#proposal_diff#>
	</pre>
	<ul class="children" id="cl<%id%>"></ul>
      </div>
      <div class="clearleft"></div>
    </div>
  </script>

  <script type="text/html" id="reply_template">
    <li>
      <div class="reply_div" id="rd<%id%>">
	<form id="rf<%id%>">
	  <textarea name="comment"></textarea>
          <input type="submit" value="add reply" />
          <input type="hidden" name="parent" value="c<%id%>" />
        </form>
      </div>
    </li>
  </script>

{%- endblock %}

{%- block relbar1 %}
  {{ document.relbar|safe }}
{%- endblock %}

{%- block body %}
  {{ document.body|safe }}
{%- endblock %}

{%- block sidebar %}
  {{ document.sidebar|safe }}
{%- endblock %}

{% block relbar2 %}
  {{ document.relbar|safe }}
{% endblock %}
